@{
    ViewData["Title"] = "Login - PicklePlay";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Styles {
    <style>
        body {
            background: url("/images/pickleball_background.jpg") no-repeat center center fixed;
            background-size: cover;
        }
    </style>
}

<div class="auth-container">
    <!-- Left Logo Panel -->
    <div class="logo-panel">
        <img src="~/images/logoV3.png" alt="PicklePlay Logo">
    </div>

    <!-- Right Form Panel -->
    <div class="form-panel">
        <div class="form-wrapper">
            <!-- Login Section -->
            <div class="form-section">
                <h3 class="text-center mb-4">Login</h3>
                
                <!-- Display error messages -->
                @if (ViewData.ModelState.ContainsKey(""))
                {
                    <div class="alert alert-danger">
                        @Html.ValidationSummary(true, "")
                    </div>
                }
                
                <!-- ASP.NET Form with proper tag helpers -->
                <form asp-controller="Auth" asp-action="Login" method="post">
                    @Html.AntiForgeryToken() <!-- ADD THIS LINE -->
                    
                    <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" placeholder="Enter email" name="email" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-control" placeholder="Enter password" name="password" required>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="remember">
                            <label class="form-check-label" for="remember">Remember me</label>
                        </div>
                        <a href="@Url.Action("ForgotPassword", "Auth")" class="text-primary text-decoration-none">Forgot Password?</a>
                    </div>
                    <div class="d-grid mb-3">
                        <button type="submit" class="btn btn-custom">Login</button>
                    </div>
                    <p class="text-center">Don't have an account?
                        <a href="@Url.Action("Signup", "Auth")" class="fw-bold text-decoration-none text-primary">Sign Up</a>
                    </p>
                    
                    <!-- Resend Verification -->
                    <div class="text-center mt-3">
                        <p class="text-center mb-1">Didn't receive the verification email?</p>
                        <button type="button" id="resendBtn" class="btn btn-outline-secondary btn-sm">Resend Verification Email</button>
                        <small id="resendMsg" class="text-muted d-block mt-2"></small>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.getElementById("resendBtn").addEventListener("click", function () {
            this.disabled = true;
            document.getElementById("resendMsg").innerText = "Resending email...";

            // Simulate backend call - replace with actual API call
            setTimeout(() => {
                document.getElementById("resendMsg").innerText = "âœ… Verification email has been resent!";
                this.disabled = false;
            }, 2000);
        });
    </script>
}